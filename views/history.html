<!-- This is a static file -->
<!-- served from your routes in server.js -->

<!-- You might want to try something fancier: -->
<!-- html/nunjucks docs: http://mozilla.github.io/nunjucks/ -->
<!-- jade: http://jade-lang.com/ -->
<!-- haml: http://haml.info/tutorial.html -->
<!-- hbs(handlebars): http://handlebarsjs.com/expressions.html -->

<!DOCTYPE html>
<html>
  <head>
    <title>d3</title>
    <meta name="description" content="A cool thing made with Glitch">
    <link rel="apple-touch-icon" sizes="180x180" href="https://cdn.glitch.com/3c328f30-b467-4709-b231-7d262ee265f8%2Fapple-touch-icon.png?v=1598736544578">
    <link rel="icon" type="image/png" sizes="32x32" href="https://cdn.glitch.com/3c328f30-b467-4709-b231-7d262ee265f8%2Ffavicon-32x32.png?v=1598736544053">
    <link rel="icon" type="image/png" sizes="16x16" href="https://cdn.glitch.com/3c328f30-b467-4709-b231-7d262ee265f8%2Ffavicon-16x16.png?v=1598736544387">
    <link rel="manifest" href="https://cdn.glitch.com/3c328f30-b467-4709-b231-7d262ee265f8%2Fsite.webmanifest?v=1598736544236">
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="stylesheet" href="public/style.css">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      plotData = [
        {% for name, meta in history.items() %}
        [ "{{name}}", {{ meta.count }}],
        {% endfor %}
      ];
         
      // Load the Visualization API and the corechart package.
google.charts.load("current", { packages: ["corechart"] });

// Set a callback to run when the Google Visualization API is loaded.
google.charts.setOnLoadCallback(drawChart);

// Callback that creates and populates a data table,
// instantiates the pie chart, passes in the data and
// draws it.
function drawChart() {
  // Create the data table.
  var data = new google.visualization.DataTable();
  data.addColumn("string", "Topping");
  data.addColumn("number", "Slices");
  data.addRows(plotData);

  // Set chart options
  var options = {
    width: 300,
    height: 300,
    backgroundColor: "#000066",
    colors: ["#66ccff", "#ff7366", "#ff66e6"],
    legend: {textStyle: {color: '#99FF66'}}
  };

  // Instantiate and draw our chart, passing in some options.
  var chart = new google.visualization.PieChart(
    document.getElementById("chart_div")
  );
  chart.draw(data, options);
}

      
    </script>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col">
        </div>
        <div class="w-75 col-md-auto">
          <div class="title">
            Since {{start_date}}
          </div>
          <div class="title">
            Who's done the dishes:
          </div>
          <div class="people">
            <div class="list-wrapper">
              <ul>
                {% for name, meta in history.items() %}
                <li>{{ name }} {{ "." * meta.percent }} {{ meta.count }} </li>
                {% endfor %}
              </ul>
            </div>
            
          </div>
          
        </div>
        <div class="col">
        </div>
      </div>
      <div class="row">
        <div class="w-50 mx-auto">
          <div class="graph">
            <div id="chart_div"></div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="link">
            <a href="/">Back</a>
          </div>
      </div>
    </div>
    


    <!-- Your web-app is https, so your scripts need to be too -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    <script src="public/client.js"></script>

  </body>
</html>
